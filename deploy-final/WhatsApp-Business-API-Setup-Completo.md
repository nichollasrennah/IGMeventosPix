# ğŸ“± Guia Completo: WhatsApp Business API
## Igreja em MossorÃ³ - ConfiguraÃ§Ã£o Passo a Passo

---

### ğŸ¯ **Por que WhatsApp Business API?**

- âœ… **100% de entrega garantida** - Oficial do Meta/WhatsApp
- âœ… **Sem detecÃ§Ã£o de bot** - Sistema oficial e profissional
- âœ… **Primeiras 1000 mensagens GRÃTIS** por mÃªs
- âœ… **Custo baixÃ­ssimo** - ~R$ 0,15 por mensagem apÃ³s limite
- âœ… **Para uso comercial** - Ideal para igrejas e organizaÃ§Ãµes
- âœ… **Recursos extras** - Templates, botÃµes, mÃ­dia

---

## ğŸ“‹ **REQUISITOS OBRIGATÃ“RIOS**

### 1. **NÃºmero de Telefone Dedicado**
- âŒ **NÃƒO PODE** usar nÃºmero pessoal existente
- âœ… **DEVE SER** um nÃºmero novo ou comercial
- âœ… **SugestÃ£o:** Comprar chip especÃ­fico para a igreja
- ğŸ“± **RecomendaÃ§Ã£o:** TIM, Vivo ou Claro (boa cobertura)

### 2. **Conta Meta Business**
- âœ… Conta empresarial verificada
- âœ… Documentos da igreja (CNPJ, comprovantes)
- âœ… InformaÃ§Ãµes bancÃ¡rias para pagamento

### 3. **VerificaÃ§Ã£o Empresarial**
- â±ï¸ **Tempo:** 3-5 dias Ãºteis
- ğŸ“„ **Documentos:** CNPJ, comprovante endereÃ§o, estatuto

---

## ğŸš€ **PASSO A PASSO COMPLETO**

### **ETAPA 1: PreparaÃ§Ã£o (30 minutos)**

#### 1.1 **Adquirir NÃºmero Dedicado**
```
ğŸ“ AÃ‡ÃƒO: Comprar chip novo
ğŸ’¡ DICA: Use operadora com boa cobertura na regiÃ£o
âš ï¸ IMPORTANTE: NÃƒO use este nÃºmero para WhatsApp pessoal
```

#### 1.2 **Reunir Documentos da Igreja**
- ğŸ“„ CNPJ da igreja
- ğŸ  Comprovante de endereÃ§o atual
- ğŸ“œ Estatuto ou ata de fundaÃ§Ã£o
- ğŸ†” RG/CPF do representante legal
- ğŸ›ï¸ Comprovante bancÃ¡rio da igreja

---

### **ETAPA 2: Criar Conta Meta Business (45 minutos)**

#### 2.1 **Acessar Meta Business**
1. VÃ¡ para: https://business.facebook.com/
2. Clique em **"Criar conta"**
3. Escolha **"Criar conta comercial"**

#### 2.2 **InformaÃ§Ãµes da Igreja**
```
Nome da empresa: igreja em MossorÃ³
Setor: OrganizaÃ§Ãµes religiosas
Site: www.igrejaemmossoro.com.br (se tiver)
EndereÃ§o: EndereÃ§o completo da igreja
Telefone: NÃºmero fixo da igreja (se tiver)
```

#### 2.3 **VerificaÃ§Ã£o de Identidade**
1. Upload do RG do representante
2. Upload do CNPJ da igreja
3. Aguardar aprovaÃ§Ã£o (1-3 dias)

---

### **ETAPA 3: Configurar WhatsApp Business (30 minutos)**

#### 3.1 **Adicionar WhatsApp Ã  Conta Business**
1. No painel Meta Business, clique **"Adicionar ativos"**
2. Selecione **"WhatsApp"**
3. Clique **"Adicionar nÃºmero do WhatsApp"**

#### 3.2 **Cadastrar NÃºmero Dedicado**
```
ğŸ“± NÃºmero: +55 (84) XXXXX-XXXX (seu nÃºmero novo)
ğŸ¢ Nome comercial: Igreja em MossorÃ³
ğŸ“Š Categoria: OrganizaÃ§Ã£o religiosa
ğŸ“ EndereÃ§o: EndereÃ§o completo da igreja
```

#### 3.3 **VerificaÃ§Ã£o do NÃºmero**
1. Meta enviarÃ¡ SMS com cÃ³digo
2. Digite o cÃ³digo recebido
3. Confirme a verificaÃ§Ã£o

---

### **ETAPA 4: Configurar Conta WhatsApp Business (20 minutos)**

#### 4.1 **Perfil da Igreja**
```
Nome: Igreja em MossorÃ³
DescriÃ§Ã£o: Conectando Vidas ao Reino de Deus
Categoria: OrganizaÃ§Ã£o religiosa
Site: www.igrejaemmossoro.com.br
Email: contato@igrejaemmossoro.com.br
EndereÃ§o: [EndereÃ§o completo]
```

#### 4.2 **Foto do Perfil**
- âœ… Logo da igreja (formato quadrado)
- âœ… ResoluÃ§Ã£o mÃ­nima: 640x640px
- âœ… Formato: JPG ou PNG

---

### **ETAPA 5: Obter Credenciais da API (15 minutos)**

#### 5.1 **Acessar ConfiguraÃ§Ãµes de API**
1. No painel WhatsApp Business, vÃ¡ em **"ConfiguraÃ§Ãµes"**
2. Clique em **"API"**
3. Selecione **"ComeÃ§ar"**

#### 5.2 **Gerar Token de Acesso**
1. Clique **"Gerar token"**
2. Defina permissÃµes: `whatsapp_business_messaging`
3. Copie e guarde o token (nunca expire)

#### 5.3 **Obter Phone Number ID**
1. Em **"NÃºmeros de telefone"**
2. Clique no nÃºmero cadastrado
3. Copie o **Phone Number ID**

#### 5.4 **Anotar Credenciais**
```
ğŸ”‘ Access Token: EAAG... (muito longo)
ğŸ“± Phone Number ID: 123456789012345
ğŸ“Š WhatsApp Business Account ID: 987654321098765
```

---

### **ETAPA 6: VerificaÃ§Ã£o Comercial (3-5 dias)**

#### 6.1 **Enviar DocumentaÃ§Ã£o**
1. No Meta Business, vÃ¡ em **"VerificaÃ§Ã£o comercial"**
2. Upload dos documentos:
   - CNPJ da igreja
   - Comprovante de endereÃ§o
   - Estatuto (se solicitado)
   - RG do representante

#### 6.2 **Aguardar AprovaÃ§Ã£o**
- â±ï¸ **Tempo:** 3-5 dias Ãºteis
- ğŸ“§ **ComunicaÃ§Ã£o:** Via email cadastrado
- âœ… **Status:** Acompanhar no painel Meta Business

---

### **ETAPA 7: Configurar Sistema da Igreja (30 minutos)**

#### 7.1 **Adicionar Credenciais no Servidor**
```bash
# Conectar ao servidor
ssh root@srv937382.hstgr.cloud

# Editar variÃ¡veis de ambiente
cd /app/pix-service
nano .env

# Adicionar linhas:
WHATSAPP_BUSINESS_TOKEN=EAAG... (seu token)
WHATSAPP_BUSINESS_PHONE_ID=123456789012345 (seu phone id)
```

#### 7.2 **Reiniciar Sistema**
```bash
# Reiniciar container WhatsApp
docker restart whatsapp-service

# Verificar logs
docker logs whatsapp-service -f
```

#### 7.3 **Testar IntegraÃ§Ã£o**
```bash
# Testar endpoint
curl -X POST http://localhost/appsheet-whatsapp \
  -H "Content-Type: application/json" \
  -d '{
    "Row ID": "TESTE123",
    "numero": "84999758144",
    "Pagador": "Teste Business API",
    "Valor Pix": "10.00",
    "cpf": "04644606464",
    "evento": "Teste ConfiguraÃ§Ã£o"
  }'
```

---

## ğŸ“Š **VERIFICAÃ‡ÃƒO DE FUNCIONAMENTO**

### âœ… **Checklist de ValidaÃ§Ã£o**
- [ ] NÃºmero dedicado ativo
- [ ] Conta Meta Business criada
- [ ] WhatsApp Business configurado
- [ ] VerificaÃ§Ã£o comercial aprovada
- [ ] Token de acesso gerado
- [ ] Phone Number ID obtido
- [ ] Credenciais configuradas no sistema
- [ ] Sistema reiniciado
- [ ] Teste de envio realizado
- [ ] Mensagem chegou ao destinatÃ¡rio

### ğŸ” **Como Verificar se EstÃ¡ Funcionando**
1. **Logs do Sistema:** `docker logs whatsapp-service -f`
2. **Status da API:** http://srv937382.hstgr.cloud/whatsapp-status
3. **Teste Manual:** Endpoint `/appsheet-whatsapp`
4. **ConfirmaÃ§Ã£o:** Mensagem chegou no celular

---

## ğŸ’° **CUSTOS E LIMITES**

### ğŸ“ˆ **Estrutura de PreÃ§os (2024)**
- **Primeiras 1000 mensagens/mÃªs:** GRÃTIS
- **1001 - 10.000 mensagens:** R$ 0,15 cada
- **10.001 - 100.000 mensagens:** R$ 0,12 cada
- **Acima de 100.000:** R$ 0,08 cada

### ğŸ“Š **Estimativa para Igreja**
```
ğŸ“± 50 mensagens/mÃªs: R$ 0,00 (grÃ¡tis)
ğŸ“± 200 mensagens/mÃªs: R$ 0,00 (grÃ¡tis)
ğŸ“± 500 mensagens/mÃªs: R$ 0,00 (grÃ¡tis)
ğŸ“± 1500 mensagens/mÃªs: R$ 75,00 (500 x R$ 0,15)
ğŸ“± 3000 mensagens/mÃªs: R$ 300,00 (2000 x R$ 0,15)
```

---

## ğŸ› ï¸ **CONFIGURAÃ‡Ã•ES AVANÃ‡ADAS**

### ğŸ”„ **Templates de Mensagem (Opcional)**
- Criar templates prÃ©-aprovados
- Envio em massa mais eficiente
- Buttons e quick replies
- Templates com variÃ¡veis

### ğŸ“Š **Webhooks (Opcional)**
- Receber status de entrega
- ConfirmaÃ§Ãµes de leitura
- Respostas dos usuÃ¡rios
- IntegraÃ§Ã£o completa

### ğŸ” **SeguranÃ§a**
- Tokens com rotaÃ§Ã£o automÃ¡tica
- PermissÃµes especÃ­ficas
- Logs de auditoria
- Backup das configuraÃ§Ãµes

---

## ğŸ†˜ **RESOLUÃ‡ÃƒO DE PROBLEMAS**

### âš ï¸ **Problemas Comuns**

#### "Token invÃ¡lido"
```
âŒ Problema: Token expirou ou estÃ¡ incorreto
âœ… SoluÃ§Ã£o: Gerar novo token no Meta Business
```

#### "Phone Number nÃ£o encontrado"
```
âŒ Problema: Phone Number ID incorreto
âœ… SoluÃ§Ã£o: Verificar ID no painel WhatsApp Business
```

#### "VerificaÃ§Ã£o pendente"
```
âŒ Problema: Conta ainda nÃ£o verificada
âœ… SoluÃ§Ã£o: Aguardar aprovaÃ§Ã£o (3-5 dias)
```

#### "Limite de mensagens atingido"
```
âŒ Problema: Passou do limite gratuito
âœ… SoluÃ§Ã£o: Adicionar mÃ©todo de pagamento
```

### ğŸ“ **Suporte Oficial**
- **Meta Business Help:** https://business.facebook.com/help
- **WhatsApp Business API Docs:** https://developers.facebook.com/docs/whatsapp
- **Suporte tÃ©cnico:** Via painel Meta Business

---

## ğŸ“‹ **RESUMO EXECUTIVO**

### â±ï¸ **Timeline Completa**
- **Dia 1:** PreparaÃ§Ã£o + Conta Meta Business (2 horas)
- **Dia 2-5:** Aguardar verificaÃ§Ã£o comercial
- **Dia 6:** Configurar API + Testar (1 hora)
- **Total:** ~3 horas de trabalho em 6 dias

### ğŸ’¡ **BenefÃ­cios Imediatos**
- âœ… **100% de entrega** - Mensagens sempre chegam
- âœ… **Sem bloqueios** - Sistema oficial
- âœ… **Custo baixo** - Primeiras 1000 grÃ¡tis
- âœ… **Profissional** - Perfil verificado
- âœ… **ConfiÃ¡vel** - Suporte oficial Meta

### ğŸ¯ **Resultado Final**
```
ğŸ“± Sistema hÃ­brido funcionando:
1. WhatsApp Business API (100% entrega)
2. WhatsApp Web (backup)
3. SimulaÃ§Ã£o (Ãºltimo recurso)

ğŸ‰ Mensagens da igreja chegando sempre!
```

---

## ğŸ“ **CONTATOS PARA SUPORTE**

### ğŸ”§ **Suporte TÃ©cnico**
- **Sistema da Igreja:** Desenvolvedor responsÃ¡vel
- **Meta Business:** Suporte oficial via painel
- **WhatsApp API:** DocumentaÃ§Ã£o oficial

### ğŸ“§ **DocumentaÃ§Ã£o Oficial**
- **Meta Business:** https://business.facebook.com/help
- **WhatsApp Business API:** https://developers.facebook.com/docs/whatsapp
- **Graph API:** https://developers.facebook.com/docs/graph-api

---

**ğŸ™ Igreja em MossorÃ³ - Conectando Vidas ao Reino**

*Documento criado em: Agosto 2024*  
*VersÃ£o: 1.0*  
*Sistema: WhatsApp Business API Integration*